include "mem.nhp"
include "io.nhp"

mod io:
	class file:
		handle ptr
		
		def __init__(array<char> path, array<char> mode):
			cdef fopen(handle, handle) handle
			cdef NULL
			
			self.ptr = fopen(cinterop::sanitizeCStr(path), cinterop::sanitizeCStr(mode))
			if self.ptr == NULL:
				abort "Failed to open file"
		def __copy__() file:
			abort "Cannot safley copy file"
		def __del__():
			cdef fclose(handle) None
			fclose(self.ptr)