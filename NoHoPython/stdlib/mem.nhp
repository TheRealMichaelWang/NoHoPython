mod mem:
	def memcpy<T>(array<T> dest, array<T> src, int destOffset, int srcOffset, int length):
		i = 0
		while i < length:
			dest[i + destOffset] = src[i + srcOffset]
			i = i + 1
	
	#analysis mode must not be none
	def report():
		cdef memoryReport() None
		memoryReport()
	def leaksan(fn<None> todo):
		cdef active_allocs int
		current = active_allocs
		todo()
		if active_allocs > current:
			abort "Memory leak detected!"